Common python code.

Originally tracked by mercurial in pylearn.
